<!DOCTYPE html>
<html>
    <head>
        <title>Text2Speech!</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
    </head>
    <body>
        <h1>Welcome to Text2Speech!</h1>
        <h2>Choose a document from your files to start!</h2>
        <form action='http://localhost:5000/upload' method='POST' enctype='multipart/form-data'>
            <input type='file' id='file' name='file' accept='.txt, .docx' required hidden>
            <label for='file' class='file-label'>Choose a file</label>
            <!--voice selection -->
            <label for='voice'>Select Voice:</label>
            <select name="voice" id="voice">
                <option value="female">Female</option>
                <option value="Male">Male</option>
            </select>

            <!--Speed control-->
            <label for="rate">Select Rate:</label>
            <select name="rate" id="speed">
                <option value="50">0.5x</option>
                <option value="100" selected>1.0x</option>
                <option value="150">1.5x</option>
                <option value="200">2.0x</option>
            </select>
            <span id="rate-display">1.0x</span>
            
            <input type='submit' value='Upload' id="upload-btn">
        </form>

        <script>
            document.querySelector("form").addEventListener("submit", function(event) {
                const fileInput = document.getElementById("file");
                const file = fileInput.files[0];
                if (!file) {
                    event.preventDefault();
                    alert("Please select a file to upload.");
                }
                const allowedTypes = ["text/plain", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"];
                if (!allowedTypes.includes(file.type)) {
                    event.preventDefault();
                    alert("Please upload a valid .txt or .docx file.");
                }
            });

            const rateSelect = document.getElementById("speed");
            const rateDisplay = document.getElementById("rate-display");
            rateSelect.addEventListener("input", function() {

                const rateMap = {
                    "50": "0.5x",
                    "100": "1.0x",
                    "150": "1.5x",
                    "200": "2.0x"
                };
                rateDisplay.textContent = rateMap[this.value] || "1.0x";
            })
        </script>

       
    </body>
        
</html>